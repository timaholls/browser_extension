# Основные настройки
http_port 3128
http_port 3129
http_port 3130
http_port 3131
http_port 3132

# Разрешаем доступ всем (без аутентификации)
http_access allow all

# Upstream прокси для каждого пользователя
# User1 -> 45.139.125.123:1050
cache_peer 45.139.125.123 parent 1050 0 no-query default login=fOwk1c:hBP8MJjtKg
cache_peer_access 45.139.125.123 allow all

# User2 -> 91.188.244.4:1050  
cache_peer 91.188.244.4 parent 1050 0 no-query default login=fOwk1c:hBP8MJjtKg
cache_peer_access 91.188.244.4 allow all

# User3 -> 185.181.245.211:1050
cache_peer 185.181.245.211 parent 1050 0 no-query default login=fOwk1c:hBP8MJjtKg
cache_peer_access 185.181.245.211 allow all

# User4 -> 188.130.187.174:1050
cache_peer 188.130.187.174 parent 1050 0 no-query default login=fOwk1c:hBP8MJjtKg
cache_peer_access 188.130.187.174 allow all

# User5 -> 45.140.53.190:1050
cache_peer 45.140.53.190 parent 1050 0 no-query default login=fOwk1c:hBP8MJjtKg
cache_peer_access 45.140.53.190 allow all

never_direct allow all

# Дополнительные настройки
cache_dir ufs /var/spool/squid 100 16 256
cache_mem 64 MB
maximum_object_size_in_memory 512 KB
maximum_object_size 1024 MB

# Логирование
access_log /var/log/squid/access.log squid
cache_log /var/log/squid/cache.log

# Безопасность
forwarded_for off
via off
request_header_access User-Agent deny all
request_header_access X-Forwarded-For deny all
request_header_access Via deny all
request_header_access Cache-Control deny all

# Таймауты
connect_timeout 30 seconds
request_timeout 60 seconds
client_lifetime 1 hour
